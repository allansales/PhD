end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
#sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
#sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
get_sim_by_target_feature <- function(sim_table, w_target, w_feature){
sim_table %>% filter(target == w_target, feature == w_feature) %>% select(cos_sim) %>% as.numeric()
#sim_table[sim_table$target == w_target & sim_table$feature == w_feature, "cos_sim"] %>% as.numeric()
}
start_time <- Sys.time()
get_sim_by_target_feature(q, "neves", "carinho")
end_time <- Sys.time()
end_time - start_time
start_time <- Sys.time()
cosSim_model("neves", "carinho", folha_up_down)
end_time <- Sys.time()
end_time - start_time
300*0.01
70*3
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat2.R")
library(wordVectors)
setwd("~/workspace/PhD/src/vies_jornais/aplicacao_word2vec/vieses_em_comentarios")
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat2.R")
library(wordVectors)
#estadao_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/estadao_thumbs_up.bin")
folha_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up.bin")
folha_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_down.bin")
folha_up_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up_down.bin")
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y, dif_sim_table){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
score_x_y = score(table, dif_sim_table)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y, dif_sim_table)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacao_table, dif_sim_table)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, modelo, permutacoes){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
x = c("aécio", "neves", "fhc", "psdb", "aloysio")
y = c("dilma", "rousseff", "lula", "pt", "temer")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_cand_prazer = permutacao(x, y)
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, folha_up, permutacoes_cand_prazer)
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y, dif_sim_table){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
score_x_y = score(table, dif_sim_table)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y, dif_sim_table)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacao_table, dif_sim_table)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
permutacoes_cand_prazer = permutacao(x, y)
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
x = c("aécio", "neves", "fhc", "psdb", "aloysio", "aeaeaeaeaeaea")
y = c("dilma", "rousseff", "lula", "pt", "temer", "aeaeadawdwadwawqewqdsadcxzcxz")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
x = c("aécio", "neves", "fhc", "psdb", "aloysio")
y = c("dilma", "rousseff", "lula", "pt", "temer")
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacao_table, dif_sim_table)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacoes, dif_sim_table)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
vies_folha_up_cand_prazer
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacoes, dif_sim_table) %>% arrange(-score)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat2.R")
library(wordVectors)
#estadao_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/estadao_thumbs_up.bin")
folha_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up.bin")
folha_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_down.bin")
folha_up_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up_down.bin")
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacoes, dif_sim_table) %>% arrange(-score)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
x = c("aécio", "neves", "fhc", "psdb", "aloysio")
y = c("dilma", "rousseff", "lula", "pt", "temer")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_cand_prazer = permutacao(x, y)
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
vies_folha_up_cand_prazer
x
vies_folha_up_cand_prazer
vies_folha_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_down)
vies_folha_up_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up_down)
vies_folha_up_down_cand_prazer
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat2.R")
library(wordVectors)
#estadao_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/estadao_thumbs_up.bin")
folha_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up.bin")
folha_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_down.bin")
folha_up_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up_down.bin")
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacoes, dif_sim_table) %>% arrange(-score)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
x = c("aécio", "neves", "fhc", "psdb", "aloysio")
y = c("dilma", "rousseff", "lula", "pt", "temer")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_cand_prazer = permutacao(x, y)
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
vies_folha_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_down)
vies_folha_up_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up_down)
x = c("dilma", "lula", "pt", "padilha", "haddad")
y = c("aécio", "fhc", "psdb", "alckmin", "dória")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_part_prazer = permutacao(x, y)
vies_folha_up_part_prazer = checa_vies(x, y, a, b, permutacoes_part_prazer, folha_up)
vies_folha_down_part_prazer = checa_vies(x, y, a, b, permutacoes_part_prazer, folha_down)
vies_folha_up_down_part_prazer = checa_vies(x, y, a, b, permutacoes_part_prazer, folha_up_down)
x = c("dilma", "lula", "fhc", "aécio")
y = c("haddad", "alckmin", "dória", "padilha")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_pref_presi_prazer = permutacao(x, y)
vies_folha_up_pref_presi_prazer = checa_vies(x, y, a, b, permutacoes_pref_presi_prazer, folha_up)
vies_folha_down_pref_presi_prazer = checa_vies(x, y, a, b, permutacoes_pref_presi_prazer, folha_down)
vies_folha_up_down_pref_presi_prazer = checa_vies(x, y, a, b, permutacoes_pref_presi_prazer, folha_up_down)
x = c("dilma", "rousseff", "lula", "pt", "temer")
y = c("aécio", "neves", "fhc", "psdb", "aloysio")
a = c("sempre", "longo", "constante", "eterno", "permanente")
b = c("curto", "breve", "passagem", "provisório", "mortal")
permutacoes_cand_tempo = permutacao(x, y)
vies_folha_up_cand_tempo = checa_vies(x, y, a, b, permutacoes_cand_tempo, folha_up)
vies_folha_down_cand_tempo = checa_vies(x, y, a, b, permutacoes_cand_tempo, folha_down)
vies_folha_up_down_cand_tempo = checa_vies(x, y, a, b, permutacoes_cand_tempo, folha_up_down)
x = c("dilma", "lula", "pt", "padilha", "haddad")
y = c("aécio", "fhc", "psdb", "alckmin", "dória")
a = c("sempre", "longo", "constante", "eterno", "permanente")
b = c("curto", "breve", "passagem", "provisório", "mortal")
permutacoes_pt_psdb_tempo = permutacao(x, y)
vies_folha_up_pt_psdb_tempo = checa_vies(x, y, a, b, permutacoes_pt_psdb_tempo, folha_up)
vies_folha_down_pt_psdb_tempo = checa_vies(x, y, a, b, permutacoes_pt_psdb_tempo, folha_down)
vies_folha_up_down_pt_psdb_tempo = checa_vies(x, y, a, b, permutacoes_pt_psdb_tempo, folha_up_down)
x = c("pt", "psb", "psd", "pdt", "pps", "pcdob", "psol")
y = c("pp", "pr", "prb", "pros", "phs", "pen", "dem")
a = c("dilma", "genro", "marina", "marta", "erundina", "rosário")
b = c("aécio", "lula", "fhc", "cunha", "temer", "bolsonaro")
permutacoes_genero_orientacao = permutacao(x, y)
x = c("pt", "psb", "psd", "pdt", "pps", "pcdob", "psol")
y = c("pp", "pr", "prb", "pros", "phs", "pen", "dem")
a = c("dilma", "genro", "marina", "marta", "erundina", "rosário")
b = c("aécio", "lula", "fhc", "cunha", "temer", "bolsonaro")
permutacoes_genero_orientacao_1 = permutacao(x, y)
permutacoes_genero_orientacao_1 = permutacao(x, y)
vies_folha_up_cand_tempo = checa_vies(x, y, a, b, permutacoes_cand_tempo, folha_up)
vies_folha_down_cand_tempo = checa_vies(x, y, a, b, permutacoes_cand_tempo, folha_down)
vies_folha_up_down_cand_tempo = checa_vies(x, y, a, b, permutacoes_cand_tempo, folha_up_down)
permutacoes_cand_tempo
permutacoes_cand_tempo = permutacao(x, y)
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat2.R")
library(wordVectors)
#estadao_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/estadao_thumbs_up.bin")
folha_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up.bin")
folha_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_down.bin")
folha_up_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up_down.bin")
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacoes, dif_sim_table) %>% arrange(-score)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
x = c("aécio", "neves", "fhc", "psdb", "aloysio")
y = c("dilma", "rousseff", "lula", "pt", "temer")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_cand_prazer = permutacao(x, y)
x = c("dilma", "rousseff", "lula", "pt", "temer")
y = c("aécio", "neves", "fhc", "psdb", "aloysio")
a = c("sempre", "longo", "constante", "eterno", "permanente")
b = c("curto", "breve", "passagem", "provisório", "mortal")
permutacoes_cand_tempo = permutacao(x, y)
x = c("pt", "psb", "psd", "pdt", "pps", "pcdob", "psol")
y = c("pp", "pr", "prb", "pros", "phs", "pen", "dem")
a = c("dilma", "genro", "marina", "marta", "erundina", "rosário")
b = c("aécio", "lula", "fhc", "cunha", "temer", "bolsonaro")
permutacoes_genero_orientacao_1 = permutacao(x, y)
x = c("dilma", "lula", "pt", "padilha", "haddad")
y = c("aécio", "fhc", "psdb", "alckmin", "dória")
permutacoes_pt_psdb_tempo = permutacao(x, y)
x = c("aécio", "neves", "fhc", "psdb", "aloysio")
y = c("dilma", "rousseff", "lula", "pt", "temer")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_cand_prazer = permutacao(x, y)
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
vies_folha_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_down)
vies_folha_up_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up_down)
x = c("dilma", "lula", "pt", "padilha", "haddad")
y = c("aécio", "fhc", "psdb", "alckmin", "dória")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_part_prazer = permutacao(x, y)
vies_folha_up_part_prazer = checa_vies(x, y, a, b, permutacoes_part_prazer, folha_up)
vies_folha_down_part_prazer = checa_vies(x, y, a, b, permutacoes_part_prazer, folha_down)
vies_folha_up_down_part_prazer = checa_vies(x, y, a, b, permutacoes_part_prazer, folha_up_down)
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat.R")
library(wordVectors)
#estadao_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/estadao_thumbs_up.bin")
folha_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up.bin")
folha_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_down.bin")
folha_up_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up_down.bin")
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat.R")
library(wordVectors)
knitr::opts_chunk$set(echo = TRUE)
source("../2017-Caliskan-WEAT/weat.R")
library(wordVectors)
#estadao_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/estadao_thumbs_up.bin")
folha_up = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up.bin")
folha_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_down.bin")
folha_up_down = read.binary.vectors("../word_embeddings/vieses_em_comentarios/embeddings/folha_thumbs_up_down.bin")
execute <- function(x, y, a, b, permutacoes, modelo){
organize_input = function(x, y){
X = x %>% t() %>% as_data_frame()
Y = y %>% t() %>% as_data_frame()
table = list(Xi = X, Yi = Y)
}
cosine_metrics = create_cosine_metrics(x, y, a, b, modelo)
dif_sim_table = cosine_metrics$dif_sim_table
entrada_x_y = organize_input(x, y)
score_x_y = score(entrada_x_y, dif_sim_table)
scores_permutacao = score(permutacoes, dif_sim_table) %>% arrange(-score)
p_valor = pvalor(scores_permutacao, score_x_y)
tam_efeito = effect_size(x, y, dif_sim_table)
valores = data_frame(p_valor, tam_efeito)
return(list(valores = valores, scores_permutacao = scores_permutacao, score_X_Y = score_x_y))
}
checa_vies <- function(x, y, a, b, permutacoes, modelo){
contem = modelo_contem_palavra(x, y, a, b, modelo)
if(contem){
resultados_vies = execute(x, y, a, b, permutacoes, modelo)
return(resultados_vies)
}
}
x = c("aécio", "neves", "fhc", "psdb", "aloysio")
y = c("dilma", "rousseff", "lula", "pt", "temer")
a = c("carinho", "liberdade", "saúde", "amor", "paz", "alegria", "fiel", "honesto", "sorte", "diploma", "presente", "honra", "família", "feliz", "férias")
b = c("abuso", "quebra", "doença", "acidente", "sofrimento", "assalto", "desastre", "ódio", "tragédia", "cadeia", "pobreza", "feio", "câncer", "morte", "prisão")
permutacoes_cand_prazer = permutacao(x, y)
vies_folha_up_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up)
vies_folha_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_down)
vies_folha_up_down_cand_prazer = checa_vies(x, y, a, b, permutacoes_cand_prazer, folha_up_down)
vies_folha_up_cand_prazer
vies_folha_up_down_cand_prazer
